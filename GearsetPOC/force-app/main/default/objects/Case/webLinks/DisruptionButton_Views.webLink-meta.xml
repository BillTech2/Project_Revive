<?xml version="1.0" encoding="UTF-8"?>
<WebLink xmlns="http://soap.sforce.com/2006/04/metadata">
    <fullName>DisruptionButton_Views</fullName>
    <availability>online</availability>
    <displayType>massActionButton</displayType>
    <linkType>javascript</linkType>
    <masterLabel>Reasons - Bike policy</masterLabel>
    <openType>onClickJavaScript</openType>
    <protected>false</protected>
    <requireRowSelection>true</requireRowSelection>
    <url>{!REQUIRESCRIPT (&quot;/soap/ajax/13.0/connection.js&quot;)}

var records = {!GETRECORDIDS($ObjectType.Case)};
var newRecords = [];

if (records[0] == null) {
	alert(&quot;Please select at least one row&quot;)
}
else {
	for (var n=0; n&lt;records.length; n++) {
		var c = new sforce.SObject(&quot;Case&quot;);
		c.id = records[n];
		c.Reason_Code__c = &quot;a4rb0000000blMk&quot;;
		c.Status=&quot;Closed&quot;;
		newRecords.push(c);
	}
	result = sforce.connection.update(newRecords);
	window.location.reload();
	if (result[0].success==&#39;true&#39;) {
		alert(&#39;The Case(s) you have selected have been classified as part of the petition for the bike policy, with the following reason: Complaint/Bike Policy/Petition&#39;);
	}
	else {
		alert(&#39;The Case(s) could not be updated - &#39; + result[0].errors);
	}
}</url>
</WebLink>
