<?xml version="1.0" encoding="UTF-8"?>
<Flow xmlns="http://soap.sforce.com/2006/04/metadata">
    <actionCalls>
        <name>Change_Tier</name>
        <label>Change Tier</label>
        <locationX>3218</locationX>
        <locationY>2654</locationY>
        <actionName>9NY3z000000000BNotFound</actionName>
        <actionType>runProgramProcess</actionType>
        <connector>
            <targetReference>Get_New_Member_Tier</targetReference>
        </connector>
        <flowTransactionModel>CurrentTransaction</flowTransactionModel>
        <inputParameters>
            <name>MembershipNumber</name>
            <value>
                <elementReference>Get_LPM.MembershipNumber</elementReference>
            </value>
        </inputParameters>
        <inputParameters>
            <name>MemberId</name>
            <value>
                <elementReference>Get_LPM.Id</elementReference>
            </value>
        </inputParameters>
        <inputParameters>
            <name>NewTier</name>
            <value>
                <elementReference>Get_QPR_Tier.Name</elementReference>
            </value>
        </inputParameters>
        <storeOutputAutomatically>true</storeOutputAutomatically>
        <versionSegment>1</versionSegment>
    </actionCalls>
    <actionCalls>
        <name>Change_Tier1</name>
        <label>Change Tier</label>
        <locationX>6122</locationX>
        <locationY>2654</locationY>
        <actionName>9NY3z000000000BNotFound</actionName>
        <actionType>runProgramProcess</actionType>
        <connector>
            <isGoTo>true</isGoTo>
            <targetReference>Get_New_Member_Tier</targetReference>
        </connector>
        <flowTransactionModel>CurrentTransaction</flowTransactionModel>
        <inputParameters>
            <name>MembershipNumber</name>
            <value>
                <elementReference>Get_LPM.MembershipNumber</elementReference>
            </value>
        </inputParameters>
        <inputParameters>
            <name>MemberId</name>
            <value>
                <elementReference>Get_LPM.Id</elementReference>
            </value>
        </inputParameters>
        <inputParameters>
            <name>NewTier</name>
            <value>
                <elementReference>Get_QPR_Tier1.Name</elementReference>
            </value>
        </inputParameters>
        <storeOutputAutomatically>true</storeOutputAutomatically>
        <versionSegment>1</versionSegment>
    </actionCalls>
    <actionCalls>
        <name>Change_to_Avantage</name>
        <label>Change to Avantage</label>
        <locationX>4802</locationX>
        <locationY>2438</locationY>
        <actionName>changeTier</actionName>
        <actionType>changeTier</actionType>
        <connector>
            <isGoTo>true</isGoTo>
            <targetReference>Get_New_Member_Tier</targetReference>
        </connector>
        <flowTransactionModel>CurrentTransaction</flowTransactionModel>
        <inputParameters>
            <name>LoyaltyProgramMemberId</name>
            <value>
                <elementReference>LPMId</elementReference>
            </value>
        </inputParameters>
        <inputParameters>
            <name>ProgramName</name>
            <value>
                <stringValue>Club Eurostar</stringValue>
            </value>
        </inputParameters>
        <inputParameters>
            <name>TierGroupName</name>
            <value>
                <stringValue>Club Eurostar Tier Group</stringValue>
            </value>
        </inputParameters>
        <inputParameters>
            <name>TargetTierName</name>
            <value>
                <stringValue>Avantage</stringValue>
            </value>
        </inputParameters>
        <nameSegment>changeTier</nameSegment>
        <storeOutputAutomatically>true</storeOutputAutomatically>
        <versionSegment>1</versionSegment>
    </actionCalls>
    <actionCalls>
        <name>Change_to_Carte_Blanche</name>
        <label>Change to Carte Blanche</label>
        <locationX>5066</locationX>
        <locationY>2438</locationY>
        <actionName>changeTier</actionName>
        <actionType>changeTier</actionType>
        <connector>
            <isGoTo>true</isGoTo>
            <targetReference>Get_New_Member_Tier</targetReference>
        </connector>
        <flowTransactionModel>CurrentTransaction</flowTransactionModel>
        <inputParameters>
            <name>LoyaltyProgramMemberId</name>
            <value>
                <elementReference>LPMId</elementReference>
            </value>
        </inputParameters>
        <inputParameters>
            <name>ProgramName</name>
            <value>
                <stringValue>Club Eurostar</stringValue>
            </value>
        </inputParameters>
        <inputParameters>
            <name>TierGroupName</name>
            <value>
                <stringValue>Club Eurostar Tier Group</stringValue>
            </value>
        </inputParameters>
        <inputParameters>
            <name>TargetTierName</name>
            <value>
                <stringValue>Carte blanche</stringValue>
            </value>
        </inputParameters>
        <nameSegment>changeTier</nameSegment>
        <storeOutputAutomatically>true</storeOutputAutomatically>
        <versionSegment>1</versionSegment>
    </actionCalls>
    <actionCalls>
        <name>Change_to_Classique</name>
        <label>Change to Classique</label>
        <locationX>4538</locationX>
        <locationY>2438</locationY>
        <actionName>changeTier</actionName>
        <actionType>changeTier</actionType>
        <connector>
            <isGoTo>true</isGoTo>
            <targetReference>Get_New_Member_Tier</targetReference>
        </connector>
        <flowTransactionModel>CurrentTransaction</flowTransactionModel>
        <inputParameters>
            <name>LoyaltyProgramMemberId</name>
            <value>
                <elementReference>LPMId</elementReference>
            </value>
        </inputParameters>
        <inputParameters>
            <name>ProgramName</name>
            <value>
                <stringValue>Club Eurostar</stringValue>
            </value>
        </inputParameters>
        <inputParameters>
            <name>TierGroupName</name>
            <value>
                <stringValue>Club Eurostar Tier Group</stringValue>
            </value>
        </inputParameters>
        <inputParameters>
            <name>TargetTierName</name>
            <value>
                <stringValue>Classique</stringValue>
            </value>
        </inputParameters>
        <nameSegment>changeTier</nameSegment>
        <storeOutputAutomatically>true</storeOutputAutomatically>
        <versionSegment>1</versionSegment>
    </actionCalls>
    <actionCalls>
        <name>Change_to_Etoile</name>
        <label>Change to Etoile</label>
        <locationX>5330</locationX>
        <locationY>2438</locationY>
        <actionName>changeTier</actionName>
        <actionType>changeTier</actionType>
        <connector>
            <isGoTo>true</isGoTo>
            <targetReference>Get_New_Member_Tier</targetReference>
        </connector>
        <flowTransactionModel>CurrentTransaction</flowTransactionModel>
        <inputParameters>
            <name>LoyaltyProgramMemberId</name>
            <value>
                <elementReference>LPMId</elementReference>
            </value>
        </inputParameters>
        <inputParameters>
            <name>ProgramName</name>
            <value>
                <stringValue>Club Eurostar</stringValue>
            </value>
        </inputParameters>
        <inputParameters>
            <name>TierGroupName</name>
            <value>
                <stringValue>Club Eurostar Tier Group</stringValue>
            </value>
        </inputParameters>
        <inputParameters>
            <name>TargetTierName</name>
            <value>
                <stringValue>Etoile</stringValue>
            </value>
        </inputParameters>
        <nameSegment>changeTier</nameSegment>
        <storeOutputAutomatically>true</storeOutputAutomatically>
        <versionSegment>1</versionSegment>
    </actionCalls>
    <actionCalls>
        <name>Change_To_New_Tier</name>
        <label>Change To New Tier Higher than immunity</label>
        <locationX>5858</locationX>
        <locationY>2330</locationY>
        <actionName>9NY3z000000000BNotFound</actionName>
        <actionType>runProgramProcess</actionType>
        <connector>
            <isGoTo>true</isGoTo>
            <targetReference>Get_New_Member_Tier</targetReference>
        </connector>
        <flowTransactionModel>CurrentTransaction</flowTransactionModel>
        <inputParameters>
            <name>MembershipNumber</name>
            <value>
                <elementReference>Get_LPM.MembershipNumber</elementReference>
            </value>
        </inputParameters>
        <inputParameters>
            <name>MemberId</name>
            <value>
                <elementReference>Get_LPM.Id</elementReference>
            </value>
        </inputParameters>
        <inputParameters>
            <name>NewTier</name>
            <value>
                <elementReference>Get_LPM.Manual_Tier_Immunity_Level__r.Name</elementReference>
            </value>
        </inputParameters>
        <storeOutputAutomatically>true</storeOutputAutomatically>
        <versionSegment>1</versionSegment>
    </actionCalls>
    <actionCalls>
        <name>Change_To_New_Tier_Higher_than_immunity1</name>
        <label>Change To New Tier Higher than immunity</label>
        <locationX>7970</locationX>
        <locationY>2330</locationY>
        <actionName>9NY3z000000000BNotFound</actionName>
        <actionType>runProgramProcess</actionType>
        <connector>
            <isGoTo>true</isGoTo>
            <targetReference>Get_New_Member_Tier</targetReference>
        </connector>
        <flowTransactionModel>CurrentTransaction</flowTransactionModel>
        <inputParameters>
            <name>MembershipNumber</name>
            <value>
                <elementReference>Get_LPM.MembershipNumber</elementReference>
            </value>
        </inputParameters>
        <inputParameters>
            <name>MemberId</name>
            <value>
                <elementReference>Get_LPM.Id</elementReference>
            </value>
        </inputParameters>
        <inputParameters>
            <name>NewTier</name>
            <value>
                <elementReference>Get_LPM.Subscription_Tier_Immunity_Level__r.Name</elementReference>
            </value>
        </inputParameters>
        <storeOutputAutomatically>true</storeOutputAutomatically>
        <versionSegment>1</versionSegment>
    </actionCalls>
    <apiVersion>58.0</apiVersion>
    <assignments>
        <name>Assign_Avantage_Tier</name>
        <label>Assign Avantage Tier</label>
        <locationX>2195</locationX>
        <locationY>1598</locationY>
        <assignmentItems>
            <assignToReference>vNewMemberTier</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Get_Avantage_Tier.Name</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Get_Tier</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Assign_Balance_Before_Reset</name>
        <label>Assign Balance Before Reset</label>
        <locationX>2261</locationX>
        <locationY>998</locationY>
        <assignmentItems>
            <assignToReference>vPoints</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Get_Status_Points_Currency.BalanceBeforeReset</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Tier_Expired</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Assign_Carte_Blanche_Tier</name>
        <label>Assign Carte Blanche Tier</label>
        <locationX>2459</locationX>
        <locationY>1598</locationY>
        <assignmentItems>
            <assignToReference>vNewMemberTier</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Get_Carte_Blanche_Tier.Name</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Get_Tier</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Assign_Classique_Tier</name>
        <label>Assign Classique Tier</label>
        <locationX>1931</locationX>
        <locationY>1598</locationY>
        <assignmentItems>
            <assignToReference>vNewMemberTier</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Get_Classique_Tier.Name</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Get_Tier</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Assign_Etoile_Tier</name>
        <label>Assign Etoile Tier</label>
        <locationX>2723</locationX>
        <locationY>1598</locationY>
        <assignmentItems>
            <assignToReference>vNewMemberTier</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Get_Etoile_Tier.Name</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Get_Tier</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Assign_Points_Balance</name>
        <label>Assign Points Balance</label>
        <locationX>2657</locationX>
        <locationY>998</locationY>
        <assignmentItems>
            <assignToReference>vPoints</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Get_Status_Points_Currency.PointsBalance</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Check_Member_Tier</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Assign_QPR_Sequence_Number</name>
        <label>Assign QPR Sequence Number</label>
        <locationX>3218</locationX>
        <locationY>2438</locationY>
        <assignmentItems>
            <assignToReference>vQPRNewTierSequence</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>fQPRManualTierImmunitySequenceNumber</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Get_QPR_Tier</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Assign_QPR_Tier_Sequence</name>
        <label>Assign QPR Tier Sequence</label>
        <locationX>6122</locationX>
        <locationY>2438</locationY>
        <assignmentItems>
            <assignToReference>vQPRNewTierSequence</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>fQPRSubscriptionTierImmunitySequenceNumber</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Get_QPR_Tier1</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Assign_Reason_for_Change</name>
        <label>Assign Reason for Change</label>
        <locationX>2426</locationX>
        <locationY>2978</locationY>
        <assignmentItems>
            <assignToReference>vReasonforChange</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>Subscription Cancellation</stringValue>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>No_Tier_Change</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Assign_Reason_for_Change1</name>
        <label>Assign Reason for Change</label>
        <locationX>2954</locationX>
        <locationY>2978</locationY>
        <assignmentItems>
            <assignToReference>vReasonforChange</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>Transaction Cancellation</stringValue>
            </value>
        </assignmentItems>
        <connector>
            <isGoTo>true</isGoTo>
            <targetReference>Update_LPM_Status_Points_Fields</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Assign_Reason_for_Change2</name>
        <label>Assign Reason for Change</label>
        <locationX>3218</locationX>
        <locationY>2978</locationY>
        <assignmentItems>
            <assignToReference>vReasonforChange</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>Manual Points Adjustment</stringValue>
            </value>
        </assignmentItems>
        <connector>
            <isGoTo>true</isGoTo>
            <targetReference>Update_LPM_Status_Points_Fields</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Assign_Reason_for_Change3</name>
        <label>Assign Reason for Change</label>
        <locationX>3482</locationX>
        <locationY>2978</locationY>
        <assignmentItems>
            <assignToReference>vReasonforChange</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>Qualifying Points Reset</stringValue>
            </value>
        </assignmentItems>
        <connector>
            <isGoTo>true</isGoTo>
            <targetReference>Update_LPM_Status_Points_Fields</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Assign_Reason_for_Change4</name>
        <label>Assign Reason for Change</label>
        <locationX>2690</locationX>
        <locationY>2978</locationY>
        <assignmentItems>
            <assignToReference>vReasonforChange</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>Downgraded from Cancellation of a ticket process</stringValue>
            </value>
        </assignmentItems>
        <connector>
            <isGoTo>true</isGoTo>
            <targetReference>Update_LPM_Status_Points_Fields</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Assign_Reason_for_Change5</name>
        <label>Assign Reason for Change</label>
        <locationX>3746</locationX>
        <locationY>2978</locationY>
        <assignmentItems>
            <assignToReference>vReasonforChange</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>Manual Tier Immunity Uncheck</stringValue>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Update_LPM_Status_Points_Fields</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Assign_Sequence_Number</name>
        <label>Assign Sequence Number</label>
        <locationX>2129</locationX>
        <locationY>1214</locationY>
        <assignmentItems>
            <assignToReference>vNewSequenceNumber</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>fNewTierSequenceNumber</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>vTierExpired</assignToReference>
            <operator>Assign</operator>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Check_Member_Tier</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Remain_in_Same_Tier</name>
        <label>Remain in Same Tier</label>
        <locationX>4274</locationX>
        <locationY>2438</locationY>
        <assignmentItems>
            <assignToReference>vRemainInSameTier</assignToReference>
            <operator>Assign</operator>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </assignmentItems>
        <connector>
            <isGoTo>true</isGoTo>
            <targetReference>Get_New_Member_Tier</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Tier_Did_Not_Expire</name>
        <label>Tier Did Not Expire</label>
        <locationX>2393</locationX>
        <locationY>1214</locationY>
        <assignmentItems>
            <assignToReference>vTierExpired</assignToReference>
            <operator>Assign</operator>
            <value>
                <booleanValue>false</booleanValue>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Check_Member_Tier</targetReference>
        </connector>
    </assignments>
    <decisions>
        <name>Check_if_needs_to_be_Added_in_Tier_Immunity_Level</name>
        <label>Check if needs to be Added in Tier Immunity Level</label>
        <locationX>4802</locationX>
        <locationY>2222</locationY>
        <defaultConnector>
            <targetReference>Change_To_New_Tier</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>No</defaultConnectorLabel>
        <rules>
            <name>QPR2</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>vQPReset</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Tier_Expired2</targetReference>
            </connector>
            <label>QPR</label>
        </rules>
        <rules>
            <name>Yes</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Get_Tier.SequenceNumber</leftValueReference>
                <operator>GreaterThan</operator>
                <rightValue>
                    <elementReference>Get_LPM.Manual_Tier_Immunity_Level__r.SequenceNumber</elementReference>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Manual_Tier_Immunity_Check</targetReference>
            </connector>
            <label>Yes</label>
        </rules>
    </decisions>
    <decisions>
        <name>Check_if_needs_to_be_Added_in_Tier_Immunity_Level1</name>
        <label>Check if needs to be Added in Tier Immunity Level</label>
        <locationX>7112</locationX>
        <locationY>2222</locationY>
        <defaultConnector>
            <targetReference>Change_To_New_Tier_Higher_than_immunity1</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>No</defaultConnectorLabel>
        <rules>
            <name>QPR</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>vQPReset</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Tier_Expired3</targetReference>
            </connector>
            <label>QPR</label>
        </rules>
        <rules>
            <name>Yes3</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Get_Tier.SequenceNumber</leftValueReference>
                <operator>GreaterThan</operator>
                <rightValue>
                    <elementReference>Get_LPM.Subscription_Tier_Immunity_Level__r.SequenceNumber</elementReference>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Subscriptions_Tier_Immunity_Check</targetReference>
            </connector>
            <label>Yes</label>
        </rules>
    </decisions>
    <decisions>
        <name>Check_Member_Tier</name>
        <label>Check Member Tier</label>
        <locationX>2459</locationX>
        <locationY>1490</locationY>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Classique_Tier1</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>vPoints</leftValueReference>
                <operator>LessThanOrEqualTo</operator>
                <rightValue>
                    <elementReference>Get_Classique_Tier.Maximum_Threshold__c</elementReference>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Assign_Classique_Tier</targetReference>
            </connector>
            <label>Classique Tier</label>
        </rules>
        <rules>
            <name>Avantage_Tier1</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>vPoints</leftValueReference>
                <operator>LessThanOrEqualTo</operator>
                <rightValue>
                    <elementReference>Get_Avantage_Tier.Maximum_Threshold__c</elementReference>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>vPoints</leftValueReference>
                <operator>GreaterThanOrEqualTo</operator>
                <rightValue>
                    <elementReference>Get_Avantage_Tier.Minimum_Threshold__c</elementReference>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Assign_Avantage_Tier</targetReference>
            </connector>
            <label>Avantage Tier</label>
        </rules>
        <rules>
            <name>Carte_Blanche_Tier1</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>vPoints</leftValueReference>
                <operator>LessThanOrEqualTo</operator>
                <rightValue>
                    <elementReference>Get_Carte_Blanche_Tier.Maximum_Threshold__c</elementReference>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>vPoints</leftValueReference>
                <operator>GreaterThanOrEqualTo</operator>
                <rightValue>
                    <elementReference>Get_Carte_Blanche_Tier.Minimum_Threshold__c</elementReference>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Assign_Carte_Blanche_Tier</targetReference>
            </connector>
            <label>Carte Blanche Tier</label>
        </rules>
        <rules>
            <name>Etoile_Tier1</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>vPoints</leftValueReference>
                <operator>GreaterThanOrEqualTo</operator>
                <rightValue>
                    <elementReference>Get_Etoile_Tier.Minimum_Threshold__c</elementReference>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Assign_Etoile_Tier</targetReference>
            </connector>
            <label>Etoile Tier</label>
        </rules>
    </decisions>
    <decisions>
        <name>Check_Tier</name>
        <label>Check Tier</label>
        <locationX>974</locationX>
        <locationY>2114</locationY>
        <defaultConnector>
            <isGoTo>true</isGoTo>
            <targetReference>Remain_in_Same_Tier</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Not_Expired</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>vTierExpired</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>vQPReset</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <isGoTo>true</isGoTo>
                <targetReference>Remain_in_Same_Tier</targetReference>
            </connector>
            <label>Tier Did Not Expire</label>
        </rules>
        <rules>
            <name>Classique_Tier</name>
            <conditionLogic>(1 AND 2 AND 3) OR 4</conditionLogic>
            <conditions>
                <leftValueReference>Get_Tier.Name</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <elementReference>Get_Classique_Tier.Name</elementReference>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>Get_Tier.SequenceNumber</leftValueReference>
                <operator>LessThanOrEqualTo</operator>
                <rightValue>
                    <elementReference>Get_Old_Member_Tier.LoyaltyTier.SequenceNumber</elementReference>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>vNewSequenceNumber</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>vNewSequenceNumber</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <numberValue>10.0</numberValue>
                </rightValue>
            </conditions>
            <connector>
                <isGoTo>true</isGoTo>
                <targetReference>Change_to_Classique</targetReference>
            </connector>
            <label>Classique Tier</label>
        </rules>
        <rules>
            <name>Avantage_Tier</name>
            <conditionLogic>(1 AND 2 AND 3) OR 4</conditionLogic>
            <conditions>
                <leftValueReference>Get_Tier.Name</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <elementReference>Get_Avantage_Tier.Name</elementReference>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>Get_Tier.SequenceNumber</leftValueReference>
                <operator>LessThan</operator>
                <rightValue>
                    <elementReference>Get_Old_Member_Tier.LoyaltyTier.SequenceNumber</elementReference>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>vNewSequenceNumber</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>vNewSequenceNumber</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <numberValue>20.0</numberValue>
                </rightValue>
            </conditions>
            <connector>
                <isGoTo>true</isGoTo>
                <targetReference>Change_to_Avantage</targetReference>
            </connector>
            <label>Avantage Tier</label>
        </rules>
        <rules>
            <name>Carte_Blanche_Tier</name>
            <conditionLogic>(1 AND 2 AND 3) OR 4</conditionLogic>
            <conditions>
                <leftValueReference>Get_Tier.Name</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <elementReference>Get_Carte_Blanche_Tier.Name</elementReference>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>Get_Tier.SequenceNumber</leftValueReference>
                <operator>LessThanOrEqualTo</operator>
                <rightValue>
                    <elementReference>Get_Old_Member_Tier.LoyaltyTier.SequenceNumber</elementReference>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>vNewSequenceNumber</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>vNewSequenceNumber</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <numberValue>30.0</numberValue>
                </rightValue>
            </conditions>
            <connector>
                <isGoTo>true</isGoTo>
                <targetReference>Change_to_Carte_Blanche</targetReference>
            </connector>
            <label>Carte Blanche Tier</label>
        </rules>
        <rules>
            <name>Etoile_Tier</name>
            <conditionLogic>(1 AND 2 AND 3) OR 4</conditionLogic>
            <conditions>
                <leftValueReference>Get_Tier.Name</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <elementReference>Get_Etoile_Tier.Name</elementReference>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>Get_Tier.SequenceNumber</leftValueReference>
                <operator>LessThan</operator>
                <rightValue>
                    <elementReference>Get_Old_Member_Tier.LoyaltyTier.SequenceNumber</elementReference>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>vNewSequenceNumber</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>vNewSequenceNumber</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <numberValue>40.0</numberValue>
                </rightValue>
            </conditions>
            <connector>
                <isGoTo>true</isGoTo>
                <targetReference>Change_to_Etoile</targetReference>
            </connector>
            <label>Etoile Tier</label>
        </rules>
    </decisions>
    <decisions>
        <name>Higher_Sequence_Number</name>
        <label>Higher Sequence Number</label>
        <locationX>6650</locationX>
        <locationY>2114</locationY>
        <defaultConnector>
            <isGoTo>true</isGoTo>
            <targetReference>Remain_in_Same_Tier</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Manual_Tier</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Get_LPM.Manual_Tier_Immunity_Level__r.SequenceNumber</leftValueReference>
                <operator>GreaterThan</operator>
                <rightValue>
                    <elementReference>Get_LPM.Subscription_Tier_Immunity_Level__r.SequenceNumber</elementReference>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Check_if_needs_to_be_Added_in_Tier_Immunity_Level</targetReference>
            </connector>
            <label>Manual Tier</label>
        </rules>
        <rules>
            <name>Subscription_Tier</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Get_LPM.Subscription_Tier_Immunity_Level__r.SequenceNumber</leftValueReference>
                <operator>GreaterThan</operator>
                <rightValue>
                    <elementReference>Get_LPM.Manual_Tier_Immunity_Level__r.SequenceNumber</elementReference>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Check_if_needs_to_be_Added_in_Tier_Immunity_Level1</targetReference>
            </connector>
            <label>Subscription Tier</label>
        </rules>
        <rules>
            <name>Same_Sequence_Number</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Get_LPM.Manual_Tier_Immunity_Level__r.SequenceNumber</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <elementReference>Get_LPM.Subscription_Tier_Immunity_Level__r.SequenceNumber</elementReference>
                </rightValue>
            </conditions>
            <connector>
                <isGoTo>true</isGoTo>
                <targetReference>Check_if_needs_to_be_Added_in_Tier_Immunity_Level1</targetReference>
            </connector>
            <label>Same Sequence Number</label>
        </rules>
    </decisions>
    <decisions>
        <name>Is_Member_in_the_same_Tier</name>
        <label>Is Member in the same Tier?</label>
        <locationX>2459</locationX>
        <locationY>1898</locationY>
        <defaultConnector>
            <targetReference>Manual_Subscription_LvL_Check</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Different Tiers</defaultConnectorLabel>
        <rules>
            <name>Same_Tier</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Get_Tier.Name</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <elementReference>Get_Old_Member_Tier.Name</elementReference>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Get_New_Status_Points_Currency</targetReference>
            </connector>
            <label>Same Tier</label>
        </rules>
    </decisions>
    <decisions>
        <name>Is_Qualifying_Points_Reset</name>
        <label>Is Qualifying Points Reset?</label>
        <locationX>2459</locationX>
        <locationY>890</locationY>
        <defaultConnector>
            <targetReference>Assign_Points_Balance</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Yes_Is_Qualifying_Points_Reset</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>vQPReset</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Assign_Balance_Before_Reset</targetReference>
            </connector>
            <label>Yes</label>
        </rules>
    </decisions>
    <decisions>
        <name>Manual_Subscription_LvL_Check</name>
        <label>Manual / Subscription LvL Check</label>
        <locationX>4868</locationX>
        <locationY>2006</locationY>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Both_Blank</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Get_LPM.Subscription_Tier_Immunity_Level__c</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>Get_LPM.Manual_Tier_Immunity_Level__c</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Check_Tier</targetReference>
            </connector>
            <label>Both Blank</label>
        </rules>
        <rules>
            <name>Manual_Tier_Set</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Get_LPM.Manual_Tier_Immunity_Level__c</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>Get_LPM.Subscription_Tier_Immunity_Level__c</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <isGoTo>true</isGoTo>
                <targetReference>Check_if_needs_to_be_Added_in_Tier_Immunity_Level</targetReference>
            </connector>
            <label>Manual Tier Set</label>
        </rules>
        <rules>
            <name>Subscription_Set</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Get_LPM.Manual_Tier_Immunity_Level__c</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>Get_LPM.Subscription_Tier_Immunity_Level__c</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <isGoTo>true</isGoTo>
                <targetReference>Check_if_needs_to_be_Added_in_Tier_Immunity_Level1</targetReference>
            </connector>
            <label>Subscription Set</label>
        </rules>
        <rules>
            <name>Manual_and_Subscription_Set</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Get_LPM.Manual_Tier_Immunity_Level__c</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>Get_LPM.Subscription_Tier_Immunity_Level__c</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Higher_Sequence_Number</targetReference>
            </connector>
            <label>Manual and Subscription Set</label>
        </rules>
    </decisions>
    <decisions>
        <name>Manual_Tier_Immunity_Check</name>
        <label>Manual Tier Immunity Check</label>
        <locationX>5066</locationX>
        <locationY>2330</locationY>
        <defaultConnector>
            <isGoTo>true</isGoTo>
            <targetReference>Remain_in_Same_Tier</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Classique</name>
            <conditionLogic>(1 AND 2) OR 3</conditionLogic>
            <conditions>
                <leftValueReference>Get_Tier.Name</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <elementReference>Get_Classique_Tier.Name</elementReference>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>vNewSequenceNumber</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>vNewSequenceNumber</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <numberValue>10.0</numberValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Change_to_Classique</targetReference>
            </connector>
            <label>Classique</label>
        </rules>
        <rules>
            <name>Avantage</name>
            <conditionLogic>(1 AND 2 AND 3) OR 4</conditionLogic>
            <conditions>
                <leftValueReference>Get_Tier.Name</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <elementReference>Get_Avantage_Tier.Name</elementReference>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>Get_Tier.SequenceNumber</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <elementReference>Get_Avantage_Tier.SequenceNumber</elementReference>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>vNewSequenceNumber</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>vNewSequenceNumber</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <numberValue>20.0</numberValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Change_to_Avantage</targetReference>
            </connector>
            <label>Avantage</label>
        </rules>
        <rules>
            <name>Carte_Blanche</name>
            <conditionLogic>(1 AND 2 AND 3) OR 4</conditionLogic>
            <conditions>
                <leftValueReference>Get_Tier.SequenceNumber</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <elementReference>Get_Carte_Blanche_Tier.SequenceNumber</elementReference>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>Get_Tier.Name</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <elementReference>Get_Carte_Blanche_Tier.Name</elementReference>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>vNewSequenceNumber</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>vNewSequenceNumber</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <numberValue>30.0</numberValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Change_to_Carte_Blanche</targetReference>
            </connector>
            <label>Carte Blanche</label>
        </rules>
        <rules>
            <name>Etoile</name>
            <conditionLogic>(1 AND 2 AND 3) OR 4</conditionLogic>
            <conditions>
                <leftValueReference>Get_Tier.SequenceNumber</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <elementReference>Get_Etoile_Tier.SequenceNumber</elementReference>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>Get_Tier.Name</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <elementReference>Get_Etoile_Tier.Name</elementReference>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>vNewSequenceNumber</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>vNewSequenceNumber</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <numberValue>40.0</numberValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Change_to_Etoile</targetReference>
            </connector>
            <label>Etoile</label>
        </rules>
    </decisions>
    <decisions>
        <name>No_Tier_Change</name>
        <label>Remain in Same Tier?</label>
        <locationX>3218</locationX>
        <locationY>3278</locationY>
        <defaultConnectorLabel>Yes</defaultConnectorLabel>
        <rules>
            <name>Yes2</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>vRemainInSameTier</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Update_Member_Tier</targetReference>
            </connector>
            <label>No</label>
        </rules>
    </decisions>
    <decisions>
        <name>Subscriptions_Tier_Immunity_Check</name>
        <label>Subscriptions Tier Immunity Check</label>
        <locationX>7178</locationX>
        <locationY>2330</locationY>
        <defaultConnector>
            <isGoTo>true</isGoTo>
            <targetReference>Remain_in_Same_Tier</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Classique2</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Get_Tier.Name</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <elementReference>Get_Classique_Tier.Name</elementReference>
                </rightValue>
            </conditions>
            <connector>
                <isGoTo>true</isGoTo>
                <targetReference>Change_to_Classique</targetReference>
            </connector>
            <label>Classique</label>
        </rules>
        <rules>
            <name>Avantage2</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Get_Tier.Name</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <elementReference>Get_Avantage_Tier.Name</elementReference>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>Get_Tier.SequenceNumber</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <elementReference>Get_Avantage_Tier.SequenceNumber</elementReference>
                </rightValue>
            </conditions>
            <connector>
                <isGoTo>true</isGoTo>
                <targetReference>Change_to_Avantage</targetReference>
            </connector>
            <label>Avantage</label>
        </rules>
        <rules>
            <name>Carte_Blanche2</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Get_Tier.Name</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <elementReference>Get_Carte_Blanche_Tier.Name</elementReference>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>Get_Tier.SequenceNumber</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <elementReference>Get_Carte_Blanche_Tier.SequenceNumber</elementReference>
                </rightValue>
            </conditions>
            <connector>
                <isGoTo>true</isGoTo>
                <targetReference>Change_to_Carte_Blanche</targetReference>
            </connector>
            <label>Carte Blanche</label>
        </rules>
        <rules>
            <name>Etoile2</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Get_Tier.Name</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <elementReference>Get_Etoile_Tier.Name</elementReference>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>Get_Tier.SequenceNumber</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <elementReference>Get_Etoile_Tier.SequenceNumber</elementReference>
                </rightValue>
            </conditions>
            <connector>
                <isGoTo>true</isGoTo>
                <targetReference>Change_to_Etoile</targetReference>
            </connector>
            <label>Etoile</label>
        </rules>
    </decisions>
    <decisions>
        <name>Tier_Expired</name>
        <label>Tier Expired?</label>
        <locationX>2261</locationX>
        <locationY>1106</locationY>
        <defaultConnector>
            <targetReference>Tier_Did_Not_Expire</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>No</defaultConnectorLabel>
        <rules>
            <name>Yes_Expired</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Get_Old_Member_Tier.TierExpirationDate</leftValueReference>
                <operator>LessThanOrEqualTo</operator>
                <rightValue>
                    <elementReference>fToday</elementReference>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Assign_Sequence_Number</targetReference>
            </connector>
            <label>Yes</label>
        </rules>
    </decisions>
    <decisions>
        <name>Tier_Expired2</name>
        <label>Tier Expired?</label>
        <locationX>3746</locationX>
        <locationY>2330</locationY>
        <defaultConnector>
            <targetReference>Remain_in_Same_Tier</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Yes_Tier_Expired2</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>vTierExpired</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Assign_QPR_Sequence_Number</targetReference>
            </connector>
            <label>Yes</label>
        </rules>
    </decisions>
    <decisions>
        <name>Tier_Expired3</name>
        <label>Tier Expired?</label>
        <locationX>6254</locationX>
        <locationY>2330</locationY>
        <defaultConnector>
            <isGoTo>true</isGoTo>
            <targetReference>Remain_in_Same_Tier</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Yes_Tier_Expired3</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>vTierExpired</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Assign_QPR_Tier_Sequence</targetReference>
            </connector>
            <label>Yes</label>
        </rules>
    </decisions>
    <decisions>
        <name>Type_of_Cancellation</name>
        <label>Type of Cancellation</label>
        <locationX>3218</locationX>
        <locationY>2870</locationY>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Subscription</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>vSubscription</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Assign_Reason_for_Change</targetReference>
            </connector>
            <label>Subscription</label>
        </rules>
        <rules>
            <name>Tickets</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>vTicket</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Assign_Reason_for_Change4</targetReference>
            </connector>
            <label>Tickets</label>
        </rules>
        <rules>
            <name>Transaction_Cancellation</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>vTransactionCancellationReturn</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Assign_Reason_for_Change1</targetReference>
            </connector>
            <label>Transaction Cancellation</label>
        </rules>
        <rules>
            <name>Manual_Actions</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>vManualActions</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Assign_Reason_for_Change2</targetReference>
            </connector>
            <label>Manual Actions</label>
        </rules>
        <rules>
            <name>Qualifying_Points_Reset</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>vQPReset</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Assign_Reason_for_Change3</targetReference>
            </connector>
            <label>Qualifying Points Reset</label>
        </rules>
        <rules>
            <name>Manual_Tier_Immunity_Uncheck</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>vManualTierImmunity</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Assign_Reason_for_Change5</targetReference>
            </connector>
            <label>Manual Tier Immunity Uncheck</label>
        </rules>
    </decisions>
    <description>Downgrade Subflow</description>
    <environments>Default</environments>
    <formulas>
        <name>fNewTierSequenceNumber</name>
        <dataType>Number</dataType>
        <expression>IF ({!Get_Old_Member_Tier.LoyaltyTier.SequenceNumber} - 10 = 0, {!Get_Old_Member_Tier.LoyaltyTier.SequenceNumber}, {!Get_Old_Member_Tier.LoyaltyTier.SequenceNumber} - 10)</expression>
        <scale>0</scale>
    </formulas>
    <formulas>
        <name>fNextResetPlusOneYear</name>
        <dataType>Date</dataType>
        <expression>IF( MONTH({!Get_Status_Points_Currency.NextResetDate}) = 2 &amp;&amp; DAY({!Get_Status_Points_Currency.NextResetDate}) = 29, DATE(YEAR({!Get_Status_Points_Currency.NextResetDate}) + 1,2, 28), 
    DATE(YEAR({!Get_Status_Points_Currency.NextResetDate})+ 1, MONTH({!Get_Status_Points_Currency.NextResetDate}), DAY({!Get_Status_Points_Currency.NextResetDate}))
)</expression>
    </formulas>
    <formulas>
        <description>This is used to check if the value for the QPR reset variable has been given, to ensure that the balance before rest is used. If it is not, we use the points balance instead.</description>
        <name>fPoints</name>
        <dataType>Number</dataType>
        <expression>IF(ISNULL({!vQPReset}),{!Get_Status_Points_Currency.PointsBalance},{!Get_Status_Points_Currency.BalanceBeforeReset})</expression>
        <scale>0</scale>
    </formulas>
    <formulas>
        <name>fQPRManualTierImmunitySequenceNumber</name>
        <dataType>Number</dataType>
        <expression>IF ({!Get_Old_Member_Tier.LoyaltyTier.SequenceNumber} - 10 &lt; {!Get_LPM.Manual_Tier_Immunity_Level__r.SequenceNumber}, {!Get_LPM.Manual_Tier_Immunity_Level__r.SequenceNumber}, {!Get_Old_Member_Tier.LoyaltyTier.SequenceNumber} - 10)</expression>
        <scale>0</scale>
    </formulas>
    <formulas>
        <name>fQPRSubscriptionTierImmunitySequenceNumber</name>
        <dataType>Number</dataType>
        <expression>IF ({!Get_Old_Member_Tier.LoyaltyTier.SequenceNumber} - 10 &lt; {!Get_LPM.Subscription_Tier_Immunity_Level__r.SequenceNumber}, {!Get_LPM.Subscription_Tier_Immunity_Level__r.SequenceNumber}, {!Get_Old_Member_Tier.LoyaltyTier.SequenceNumber} - 10)</expression>
        <scale>1</scale>
    </formulas>
    <formulas>
        <description>Used if there is no tier change</description>
        <name>fStatusPointstoNextTierSame</name>
        <dataType>Number</dataType>
        <expression>IF(ISBLANK({!Get_Tier.Maximum_Threshold__c}),
{!Get_Tier.Maximum_Threshold__c} +1,
 ({!Get_Tier.Maximum_Threshold__c} - {!Get_New_Status_Points_Currency.PointsBalance}) +1 )</expression>
        <scale>2</scale>
    </formulas>
    <formulas>
        <name>fStatusPointToNextTier</name>
        <dataType>Number</dataType>
        <expression>IF(ISBLANK({!Get_New_Member_Tier.LoyaltyTier.Maximum_Threshold__c}), 
{!Get_New_Member_Tier.LoyaltyTier.Maximum_Threshold__c} +1,
 ({!Get_New_Member_Tier.LoyaltyTier.Maximum_Threshold__c} - {!Get_Status_Points_Currency.PointsBalance}) +1 )</expression>
        <scale>2</scale>
    </formulas>
    <formulas>
        <name>fTierExpirationDate</name>
        <dataType>Date</dataType>
        <expression>IF({!Get_New_Member_Tier.TierExpirationDate} = {!fNextResetPlusOneYear}, {!Get_New_Member_Tier.TierExpirationDate},{!fNextResetPlusOneYear})</expression>
    </formulas>
    <formulas>
        <name>fToday</name>
        <dataType>Date</dataType>
        <expression>TODAY()</expression>
    </formulas>
    <interviewLabel>Loyalty - Subflow Tier Downgrade {!$Flow.CurrentDateTime}</interviewLabel>
    <label>Loyalty - Subflow Tier Downgrade</label>
    <processMetadataValues>
        <name>BuilderType</name>
        <value>
            <stringValue>LightningFlowBuilder</stringValue>
        </value>
    </processMetadataValues>
    <processMetadataValues>
        <name>CanvasMode</name>
        <value>
            <stringValue>AUTO_LAYOUT_CANVAS</stringValue>
        </value>
    </processMetadataValues>
    <processMetadataValues>
        <name>OriginBuilderType</name>
        <value>
            <stringValue>LightningFlowBuilder</stringValue>
        </value>
    </processMetadataValues>
    <processType>AutoLaunchedFlow</processType>
    <recordLookups>
        <name>Get_Avantage_Tier</name>
        <label>Get Avantage Tier</label>
        <locationX>2459</locationX>
        <locationY>458</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Get_Carte_Blanche_Tier</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Name</field>
            <operator>EqualTo</operator>
            <value>
                <stringValue>Avantage</stringValue>
            </value>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>LoyaltyTier</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <name>Get_Carte_Blanche_Tier</name>
        <label>Get Carte Blanche Tier</label>
        <locationX>2459</locationX>
        <locationY>566</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Get_Etoile_Tier</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Name</field>
            <operator>EqualTo</operator>
            <value>
                <stringValue>Carte blanche</stringValue>
            </value>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>LoyaltyTier</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <name>Get_Classique_Tier</name>
        <label>Get Classique Tier</label>
        <locationX>2459</locationX>
        <locationY>350</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Get_Avantage_Tier</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Name</field>
            <operator>EqualTo</operator>
            <value>
                <stringValue>Classique</stringValue>
            </value>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>LoyaltyTier</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <name>Get_Etoile_Tier</name>
        <label>Get Etoile Tier</label>
        <locationX>2459</locationX>
        <locationY>674</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Get_Status_Points_Currency</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Name</field>
            <operator>EqualTo</operator>
            <value>
                <stringValue>Etoile</stringValue>
            </value>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>LoyaltyTier</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <name>Get_LPM</name>
        <label>Get LPM</label>
        <locationX>2459</locationX>
        <locationY>134</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Get_Old_Member_Tier</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Id</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>LPMId</elementReference>
            </value>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>LoyaltyProgramMember</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <name>Get_New_Member_Tier</name>
        <label>Get New Member Tier</label>
        <locationX>3218</locationX>
        <locationY>2762</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Type_of_Cancellation</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>LoyaltyMemberId</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>LPMId</elementReference>
            </value>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>LoyaltyMemberTier</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <name>Get_New_Status_Points_Currency</name>
        <label>Get New Status Points Currency</label>
        <locationX>50</locationX>
        <locationY>2006</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Update_LPM_Status_Points_Field</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Name</field>
            <operator>EqualTo</operator>
            <value>
                <stringValue>Status Points</stringValue>
            </value>
        </filters>
        <filters>
            <field>LoyaltyMemberId</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>LPMId</elementReference>
            </value>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>LoyaltyMemberCurrency</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <name>Get_Old_Member_Tier</name>
        <label>Get Old Member Tier</label>
        <locationX>2459</locationX>
        <locationY>242</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Get_Classique_Tier</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>LoyaltyMemberId</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>LPMId</elementReference>
            </value>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>LoyaltyMemberTier</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <name>Get_QPR_Tier</name>
        <label>Get QPR Tier</label>
        <locationX>3218</locationX>
        <locationY>2546</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Change_Tier</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>SequenceNumber</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>vQPRNewTierSequence</elementReference>
            </value>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>LoyaltyTier</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <name>Get_QPR_Tier1</name>
        <label>Get QPR Tier</label>
        <locationX>6122</locationX>
        <locationY>2546</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Change_Tier1</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>SequenceNumber</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>vQPRNewTierSequence</elementReference>
            </value>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>LoyaltyTier</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <name>Get_Status_Points_Currency</name>
        <label>Get Status Points Currency</label>
        <locationX>2459</locationX>
        <locationY>782</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Is_Qualifying_Points_Reset</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Name</field>
            <operator>EqualTo</operator>
            <value>
                <stringValue>Status Points</stringValue>
            </value>
        </filters>
        <filters>
            <field>LoyaltyMemberId</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>LPMId</elementReference>
            </value>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>LoyaltyMemberCurrency</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <name>Get_Tier</name>
        <label>Get Tier</label>
        <locationX>2459</locationX>
        <locationY>1790</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Is_Member_in_the_same_Tier</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Name</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>vNewMemberTier</elementReference>
            </value>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>LoyaltyTier</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordUpdates>
        <name>Update_LPM_Status_Points_Field</name>
        <label>Update LPM Status Points Field</label>
        <locationX>50</locationX>
        <locationY>2114</locationY>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Id</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>LPMId</elementReference>
            </value>
        </filters>
        <inputAssignments>
            <field>StatusPointsToRemainInTier__c</field>
            <value>
                <elementReference>Get_Tier.Minimum_Threshold__c</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Status_Points_To_Next_Tier__c</field>
            <value>
                <elementReference>fStatusPointstoNextTierSame</elementReference>
            </value>
        </inputAssignments>
        <object>LoyaltyProgramMember</object>
    </recordUpdates>
    <recordUpdates>
        <name>Update_LPM_Status_Points_Fields</name>
        <label>Update LPM Status Points Fields</label>
        <locationX>3746</locationX>
        <locationY>3086</locationY>
        <connector>
            <targetReference>No_Tier_Change</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Id</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>LPMId</elementReference>
            </value>
        </filters>
        <inputAssignments>
            <field>StatusPointsToRemainInTier__c</field>
            <value>
                <elementReference>Get_New_Member_Tier.LoyaltyTier.Minimum_Threshold__c</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Status_Points_To_Next_Tier__c</field>
            <value>
                <elementReference>fStatusPointToNextTier</elementReference>
            </value>
        </inputAssignments>
        <object>LoyaltyProgramMember</object>
    </recordUpdates>
    <recordUpdates>
        <name>Update_Member_Tier</name>
        <label>Update Member Tier</label>
        <locationX>3086</locationX>
        <locationY>3386</locationY>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Id</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>Get_New_Member_Tier.Id</elementReference>
            </value>
        </filters>
        <inputAssignments>
            <field>ReasonForChange</field>
            <value>
                <elementReference>vReasonforChange</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>TierExpirationDate</field>
            <value>
                <elementReference>fTierExpirationDate</elementReference>
            </value>
        </inputAssignments>
        <object>LoyaltyMemberTier</object>
    </recordUpdates>
    <start>
        <locationX>2333</locationX>
        <locationY>0</locationY>
        <connector>
            <targetReference>Get_LPM</targetReference>
        </connector>
    </start>
    <status>Obsolete</status>
    <variables>
        <name>LPMId</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>vManualActions</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>vManualTierImmunity</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>vNewMemberTier</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>vNewSequenceNumber</name>
        <dataType>Number</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <scale>0</scale>
    </variables>
    <variables>
        <name>vPoints</name>
        <dataType>Number</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>true</isOutput>
        <scale>2</scale>
    </variables>
    <variables>
        <name>vQPReset</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>vQPRNewTierSequence</name>
        <dataType>Number</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <scale>0</scale>
    </variables>
    <variables>
        <name>vReasonforChange</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>vRemainInSameTier</name>
        <dataType>Boolean</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <value>
            <booleanValue>false</booleanValue>
        </value>
    </variables>
    <variables>
        <name>vSubscription</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>vTicket</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>vTierExpired</name>
        <dataType>Boolean</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <value>
            <booleanValue>false</booleanValue>
        </value>
    </variables>
    <variables>
        <name>vTransactionCancellationReturn</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>false</isOutput>
    </variables>
</Flow>
