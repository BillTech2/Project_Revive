<apex:page id="ContactUs" showHeader="false" standardStylesheets="false"
           sidebar="false" applyHtmlTag="false" applyBodyTag="false" docType="html-5.0"
           controller="cu_MainCtrl" language="{!selectedLanguageCode}">

  <html xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" lang="{!selectedLanguageCode}">
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="x-ua-compatible" content="ie=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate" />
    <meta http-equiv="Pragma" content="no-cache" />
    <meta http-equiv="Expires" content="0" />
    <link rel="shortcut icon" href="{!URLFOR($Resource.EurostarFavIcon)}"/>
    <apex:slds />
    <apex:includeLightning />
  </head>

  <style type="text/css">
  @font-face {
    font-family: 'LaPontaise';
    src: url({!URLFOR($Resource.PreferenceCenterPageFonts, '/PreferenceCenterPageFonts/LaPontaise-Regular/LaPontaise-Regular.ttf')}) format('truetype');
  }

  @font-face {
    font-family: 'LaPontaise-SemiBold';
    src: url({!URLFOR($Resource.PreferenceCenterPageFonts, '/PreferenceCenterPageFonts/LaPontaise-SemiBold/LaPontaise-SemiBold.ttf')}) format('truetype');
  }

  @font-face {
    font-family: 'ABCSocial-Regular';
    src: url({!URLFOR($Resource.PreferenceCenterPageFonts, '/PreferenceCenterPageFonts/ABCSocial-Regular/ABCSocial-Regular.ttf')}) format('truetype');
  }

  @font-face {
    font-family: 'ABCSocial-Bold';
    src: url({!URLFOR($Resource.PreferenceCenterPageFonts, '/PreferenceCenterPageFonts/ABCSocial-Bold/ABCSocial-Bold.ttf')}) format('truetype');
  }

  @font-face {
    font-family: 'Arial';
    src: url({!URLFOR($Resource.PreferenceCenterPageFonts, '/PreferenceCenterPageFonts/Arial.ttf')});
  }
  @font-face {
    font-family: 'Aspect-Bold';
    src: url({!URLFOR($Resource.PreferenceCenterPageFonts, '/PreferenceCenterPageFonts/Aspect-Bold/aspect-bold.ttf')}) format('truetype');

  }
  @font-face {
    font-family: 'Aspect-Light';
    src: url({!URLFOR($Resource.PreferenceCenterPageFonts, '/PreferenceCenterPageFonts/Aspect-Light/aspect-light.woff2')});
  }
  @font-face {
    font-family: 'Pembroke-Regular';
    src: url({!URLFOR($Resource.PreferenceCenterPageFonts, 'PreferenceCenterPageFonts/PembrokeWeb-Regular/pembrokeweb-regular.ttf')}) format('truetype');
    font-weight: normal;
    font-style: normal;
  }
  @font-face {
    font-family: 'Pembroke-Bold';
    src: url({!URLFOR($Resource.PreferenceCenterPageFonts, 'PreferenceCenterPageFonts/PembrokeWeb-Bold/pembrokeweb-bold.eot')});
    src: url({!URLFOR($Resource.PreferenceCenterPageFonts, 'PreferenceCenterPageFonts/PembrokeWeb-Bold/pembrokeweb-bold.eot')}) format('embedded-opentype'),
         url({!URLFOR($Resource.PreferenceCenterPageFonts, 'PreferenceCenterPageFonts/PembrokeWeb-Bold/pembrokeweb-bold.woff')}) format('woff'),
         url({!URLFOR($Resource.PreferenceCenterPageFonts, 'PreferenceCenterPageFonts/PembrokeWeb-Bold/pembrokeweb-bold.ttf')}) format('truetype'),
         url({!URLFOR($Resource.PreferenceCenterPageFonts, 'PreferenceCenterPageFonts/PembrokeWeb-Bold/pembrokeweb-bold.svg')}) format('svg');
    font-weight: normal;
    font-style: normal;
  }

  @font-face {
    font-family: 'Dummy-IECompat';
    src: url({!URLFOR($Resource.PreferenceCenterPageFonts, '/PreferenceCenterPageFonts/Aspect-Bold/aspect-bold.woff2')});
  }

  .text-align-center-vf { text-align: center; }
  .inner-background-vf { 
    background: #F5F5F5; 
    padding-bottom: 135px;
    font-family: ABCSocial-Regular;
    font-size: 16px;
  }
  .link-label { color: #0D57CC; cursor: pointer; text-decoration: none;}
  .emblem-slot { width: inherit;
      padding: 0px !important; border: none; display: block; }
  .header-main-brush { height: 75px; background: #00286A; }
  .header-underline-brush { height: 7px; background: #1c4094; }
  .height-inheritance { height: inherit; }
  .footer-text-params {
    height: 75px;
    background: #00286A;
    font-size: 16px;
    line-height: 18px;
    font-family: 'ABCSocial-Regular';
    color: white;
  }
  .footer-legal{
    height: 60px;
    text-align: left;
    margin-left: 5.078125%;
    vertical-align: bottom;
    flex-direction: column-reverse;
    display: flex;
    padding-bottom: 15px;
  }

  @media all and (max-width: 600px) {
    .footer-text-params {
      font-size: 12px;
      line-height: 16px;
    }
  }
  @media all and (max-width: 400px) {
    .footer-text-params {
      font-size: 12px;
      line-height: 16px;
    }
  }
  @media all and (max-width: 340px) {
    .footer-text-params {
      font-size: 10px;
      line-height: 14px;
    }
  }
  </style>

  <style>
    select {
        border:0px;
        outline:0px;
        background:transparent;
        -moz-appearance: none;
        -webkit-appearance: none;
        -o-appearance: none;
    }

    select::-ms-expand {
        display: none;
    }

    select option{
        
        background:transparent;
        background-color:#07193E;
    }

    .logo-contaner{
      margin-left: 67px;
      height: 54.5px;
      width: 195px;
    }

    .title-container{
      font-family: LaPontaise-SemiBold;
      margin-left: 5.078125%;
      margin-top: 15.75px;
      margin-bottom: 15px;
      float: right;
      color: #FCF5D8;
      font-size: 36px;
      padding-right: 53px;
    }

    .slds-scope .title-container a:hover, .slds-scope .title-container a:focus, .slds-scope .title-container a {
    color: #FCF5D8 !important;
    text-decoration: none;
    --lwc-brandTextLinkActive: #FCF5D8 !important;
    --lwc-brandTextLink: #FCF5D8 !important;
    }

    .lang-container{
      float: right;
      padding-right: 48px;
      color: #FCF5D8;
    }

    #app-footer-template-link {
      color: White;
      text-decoration: none;
    }

    @media only screen and (max-width: 480px) {
      .lang-container{
        padding-right: 0px;
      }
      .logo-contaner{
        margin-left: 12px;
      }
    } 

  </style>

  <style>
    .arrow {
      margin-left: -35px;
      display: inline-block;
                     margin-top: 12px;
    }

    .arrow i {
        width: 0;
        height: 0;
        border-left: 5px solid transparent;
        border-right: 5px solid transparent;
        border-top: 5px solid white;
        /*margin-top: -7px;*/
        display: block;
    }

    select.choose_state {
        /*border: 1px solid #000;*/
        -webkit-appearance: none;
        width: -webkit-fill-available;
        color: #FCF5D8 !important;
        -moz-appearance: none;
        -o-appearance: none;
        -webkit-border-radius: 0px;
        outline: none;
        margin-right: 15px;
        /*font-size: 1.4em;*/
        padding-right: 20px; /*Important*/
        display: inline-block; /*Important*/
    }
    select.pembroke {
        font-family: 'ABCSocial-Bold';
        font-size: 18px;
        /*line-height: 20px;*/
    }
    option.pembroke {
        font-family: 'ABCSocial-Bold';
    }

    #auraErrorMessage,
    span[id="org.ajax4jsf.oncomplete"] {
      display: none !important;
    }

  </style>

  <script type="text/javascript">

     Visualforce.remoting.Manager.invokeAction(
        'cu_MainCtrl.getLanguagePreference',
        function (result, event) {
           if (event.status) {
              var sel = document.getElementById('ContactUs:formTop:pageLang');
              var opts = sel.options;
              for (let [index, opt] of [...opts].entries()) {
                 if (opt.value == "{!selectedLanguageCode}") {
                    sel.selectedIndex = index;
                    break;
                 }
              }
              forceChangePageLanguage(result);
           } else if (event.type === "exception") {
              console.log('failed to get id');
           }
        },
        {escape: true}
     );

  </script>

  <apex:form id="formTop">
    <header class="slds-scope" id="app-header-template">
      <div class="header-main-brush">
        <div class="slds-grid slds-align_absolute-center height-inheritance ">
          <div class="slds-col_bump-right logo-contaner">
            <a href="{!homePageLink}">
              <img src="{!URLFOR($Resource.PreferenceCenterPageFonts, 'PreferenceCenterPageFonts/Images/E_Logo-Cream.svg')}"
                  class="slds-p-horizontal--medium emblem-slot slds-align-bottom logo-image"/>
            </a>
          </div>
            <div class="slds-col_bump-left slds-show_medium title-container" style="float:right">
              <a href="{!helpCenterLink}">
                {!helpCenterLabel}
              </a>
            </div>
            <div class="lang-container" style="float:right">
              <div class="slds-grid">
                <apex:selectList id="pageLang" styleClass="slds-text-color_inverse choose_state pembroke" value="{!selectedLanguageCode}" size="1" >
                  <apex:selectoptions id="LANG" value="{!AvailableLanguageCodes}"/>
                  <apex:actionSupport event="onchange" action="{!incrementCounter}" onComplete="renderComponent();" reRender="formTop,formMain"/>
                </apex:selectlist>
                <div class="arrow"><i></i></div>
              </div>
              <apex:actionFunction name="forceChangePageLanguage" action="{!enforceLanguage}" onComplete="renderComponent();" reRender="formMain">
                <apex:param value="" name="lang"/>
              </apex:actionFunction>
            </div>
        </div>
      </div>
    </header>
  </apex:form>
  
  <apex:outputPanel id="formMain">
    <body style="margin:0px;">
        <div class="slds-scope" id="content"/>
          <!-- SPINNER -->
          <div class="slds-scope">
            <div id="spinner" class="slds-spinner_container slds-is-relative" style="height: 200px;">
              <div role="status" class="slds-spinner slds-spinner--large ">
                  <div class="slds-spinner__dot-a"></div>
                  <div class="slds-spinner__dot-b"></div>
              </div>
            </div>
          </div>
          <!-- / SPINNER -->
    </body>

    <script>
       function renderComponent() {
            function hideSpinner() {
              document.getElementById('spinner').className += ' slds-hide';
            }

            document.addEventListener('lightning__showtoast', event => {
              sforce.one.showToast(event.toastAttributes);
            });
            $Lightning.use("c:ContactUsLightningApp",
             function () {
                $Lightning.createComponent("c:ContactUsPage",
                   {
                      pageLanguageCode: "{!selectedLanguageCode}",
                      hideSpinner: hideSpinner
                   },
                   "content",
                   function (cmp) {}
                );
             }
          );
        }
    </script>

    <script type="text/javascript">

       window.goToPrivatePolicy = function() {
           window.open('{! $Label.cu_PrivatePolicyLink }');
       };

       window.goToContactUs = function() {
           window.open('{! $Label.cu_ContactUsLink }');
       };

    </script>


<div class="slds-grid slds-grid_align-center inner-background-vf">
  <div class="slds-col slds-size_12-of-12 slds-small-size_12-of-12 slds-medium-size_12-of-12 slds-large-size_6-of-12">
    <div>
      <div class="text-align-center-vf">{! $Label.cu_EurostarAddress }</div>
      <div class="slds-m-top--medium text-align-center-vf">
        <a href="#" onclick="goToPrivatePolicy();" class="link-label">{! $Label.cu_PrivatePolicyLinkText }</a>
        &nbsp;&#124;&nbsp;
        <a href="#" onclick="goToContactUs();" class="link-label">{! $Label.cu_ContactUs }</a>
      </div>
    </div>
  </div>
</div>

    <footer class="footer-text-params slds-p-top--x-large slds-p-bottom--large">
      <div class="slds-grid slds-grid_align-center">
            <div class="slds-m-top--medium text-align-center-vf footer-legal">
              <span>Â© {!YEAR(TODAY())} {!$Label.CompApp_EurostarRights} <a id="app-footer-template-link" href="http://www.eurostar.com">{!$Label.CompApp_eurostar_site}</a></span>
            </div>
      </div>
    </footer>
  </apex:outputPanel>
    <script type="text/javascript">
        var marketLanguage = "{!if(selectedLanguageCode = 'en', 'uk-en', if(selectedLanguageCode = 'fr', 'fr-fr', if(selectedLanguageCode = 'nl', 'nl-nl', 'uk-en')))}";
        var utag_data = {
            "marketLanguage" : marketLanguage
        };
    </script>

    <!-- Loading script asynchronously -->
    <script type="text/javascript">
        (function(a,b,c,d)

                { a='{!$Setup.Tealium_Analytics_Settings__c.API__c}'; b=document;c='script';d=b.createElement(c);d.src=a;d.type='text/java'+c;d.async=true; a=b.getElementsByTagName(c)[0];a.parentNode.insertBefore(d,a); }
        )();
    </script>
  </html>

</apex:page>